$(document).ready(function () { $(".exactDayDropdown, .everyMonthDropdown, .schedulePatternTypeDropdown").kendoDropDownList(); $(".exactDayDropdown, .everyMonthDropdown").css("width", "80px"); $(".schedulePatternTypeDropdown").css("width", "200px"); $("#sceduleSummary span").css("font-weight", "800"); $(".exactDay, .everyMonth").hide(); $(".options > .k-button").click(function () { var b = $(this).attr("name"); "save" != b && "save-continue" != b || UpdateSchedule() }); $('.form-actions > input[type="submit"]').click(function () { DeleteSchedule() }); $("#SchedulePatternType").change(ToggleDropdowns); $("fieldset input, fieldset select").change(UpdateSummary) }); $(window).load(function () { ToggleDropdowns(); UpdateSummary() }); function UpdateSummary() { var b = $("#SchedulePatternType").val(), a = $("#SchedulePatternType option:selected").text().toLowerCase(), c = $.getHiddenValFromDom("#SchedulePatternFromTime"), d = $.getHiddenValFromDom("#SchedulePatternToTime"), e = $.getHiddenValFromDom("#EntityFromDate"), f = $.getHiddenValFromDom("#EntityToDate"), g = $.getHiddenValFromDom("#ExactDayValue"), h = $.getHiddenValFromDom("#EveryMonthFromDayValue"), k = $.getHiddenValFromDom("#EveryMonthToDayValue"); 10 == b && (a = "every month from the " + NumberWithOrdinalIndicators(h) + " to the " + NumberWithOrdinalIndicators(k) + " day"); 25 == b && (a = "on the " + NumberWithOrdinalIndicators(g) + " day of every month"); "" == c && (c = "no starting time"); "" == d && (d = "no ending time"); "" == e && (e = "no starting date"); "" == f && (f = "no ending date"); $("#patternType").text(a); $("#timeFrom").text(c); $("#timeTo").text(d); $("#dateFrom").text(e); $("#dateTo").text(f) } function UpdateSchedule() { var b = $.getHiddenValFromDom("#update-schedule-url"), a = $.getHiddenValFromDom("#schedule-id"), c = $.getHiddenValFromDom("#EntityFromDate"), d = $.getHiddenValFromDom("#EntityToDate"), e = $.getHiddenValFromDom("#SchedulePatternType"), f = $.getHiddenValFromDom("#SchedulePatternFromTime"), g = $.getHiddenValFromDom("#SchedulePatternToTime"), h = $.getHiddenValFromDom("#ExactDayValue"), k = $.getHiddenValFromDom("#EveryMonthFromDayValue"), l = $.getHiddenValFromDom("#EveryMonthToDayValue"), a = "id=" + a + ("&entityFromDate=" + c), a = a + ("&entityToDate=" + d), a = a + ("&schedulePatternType=" + e), a = a + ("&schedulePatternFromTime=" + f), a = a + ("&schedulePatternToTime=" + g), a = a + ("&ExactDayValue=" + h), a = a + ("&everyMonthFromDayValue=" + k), a = a + ("&everyMonthToDayValue=" + l), d = {}; addAntiForgeryToken(d); $.ajax({ cache: !1, async: !1, type: "POST", data: a, url: b, headers: d, success: function () { }, error: function (a, b, d) { alert("Updating schedule failed.") } }) } function DeleteSchedule() { var b = $.getHiddenValFromDom("#delete-schedule-url"), a = "id=" + $.getHiddenValFromDom("#schedule-id"), c = {}; addAntiForgeryToken(c); $.ajax({ cache: !1, async: !1, type: "POST", data: a, url: b, headers: c, success: function () { }, error: function (a, b, c) { alert("Deleting schedule failed.") } }) } function ToggleDropdowns() { var b = $("#SchedulePatternType").val(); 10 == b ? ($(".exactDay").hide(), $(".everyMonth").show()) : 25 == b ? ($(".exactDay").show(), $(".everyMonth").hide()) : $(".exactDay, .everyMonth").hide() } function NumberWithOrdinalIndicators(b) { if (11 == b || 12 == b || 13 == b) return b + "th"; var a = ""; switch (b.toString().slice(-1)) { case "1": a = "st"; break; case "2": a = "nd"; break; case "3": a = "rd"; break; case "4": case "5": case "6": case "7": case "8": case "9": case "0": a = "th" } return b + a };